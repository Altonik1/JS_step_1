<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulls and Cows</title>
</head>

<body>
    <button onclick="bullsAndCows();">🐂🐄</button>

    <script>
        function bullsAndCows() {
            const secret = getUniques();
            // console.log(`secret: ${secret}`);
            for (let i = 0; i < 10; i++) {
                const input = getInput();
                console.log(`Remaining attempts ${9 - i}`);
                let result = checkInput(input, secret);
                if (result === 4) {
                    console.log('You win!');
                    return;
                }
            }
            console.log('You loose!');
        };

        /*Counts bulls and cows. Returns number of bulls*/
        function checkInput(input, secret) {
            let bulls = 0;
            let cows = 0;
            input.forEach((el, index) => {
                if (secret.indexOf(el) >= 0) {
                    return secret.indexOf(el) === index ? bulls++ : cows++
                }
            });
            console.log(`Bulls: ${bulls}\nCows: ${cows}`);
            return bulls;
        };

        /*Converts user input into array of numbers*/
        function getInput() {
            let userInput = prompt('Enter your answer');
            if (!isNaN(+userInput) && userInput.length === 4) {
                return userInput.split('').map(el => +el);
            }
            console.log('Bullshit!');
        };

        /*Creates secret number: an array of 4 unique digits. */
        function getUniques() {
            const arr = [getRndmInt(0, 10)];
            while (arr.length < 4) {
                let num = getRndmInt(0, 10);
                if (!arr.includes(num)) {
                    arr.push(num);
                }
            }
            return arr;
        };

        function getRndmInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
        };
    </script>
</body>

</html>